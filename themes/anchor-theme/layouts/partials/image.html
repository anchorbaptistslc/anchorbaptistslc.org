{{- /* Handle both string and map inputs */ -}}
{{- /* Case 1: Direct string path */ -}}
{{- if reflect.IsMap . -}}
  {{- /* Case 2: Dictionary with path and width */ -}}
  {{- $path := .path -}}
  {{- $width := default "1840" .width -}}
  {{- with resources.GetMatch $path -}}
    {{- $processed := .Resize (printf "%sx" $width) -}}
    {{- $processed.RelPermalink -}}
  {{- else -}}
    {{- $path -}}
  {{- end -}}
{{- else -}}
  {{- /* String path with default width */ -}}
  {{- with resources.GetMatch . -}}
    {{- $processed := .Resize "1840x" -}}
    {{- $processed.RelPermalink -}}
  {{- else -}}
    {{- . -}}
  {{- end -}}
{{- end -}} 